<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link rel="stylesheet" href="movie-style.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>


</head>

<body>

    <div class="container header">
        <img src="movie-images/movies-logo.png" class="logo">
        <a href="#" class="header-btn"><i class="fa fa-user"></i>Account</a>
    </div>

    <div class="container series">
        <h3>Popular Movies</h3>
        <div class="row">
            <a id="desc-btn" onclick="return theDescFunction();" href="#" class="header-btn"></i>title in descending </a>
            <a href="#" class="header-btn"></i>title in ascending</a>
        </div>
     
            

        <div class="row" id="filmler-listele">
            
        </div>
    </div>


    <!-- <div id="filmler-listele">

    </div> -->

    <div id="liste">

        <!-- veriler bu bölümde olacak-->
    </div>

    <script>


        function sortTrackingNo(veri, order) {
            return veri.sort(order === 'DESC'
                ? function (b, a) {
                    a = a.Title.slice(0, 3);
                    b = b.Title.slice(0, 3);
                    return isNaN(b) - isNaN(a) || a > b || -(a < b);
                }
                : function (a, b) {
                    a = a.Title.slice(0, 3);
                    b = b.Title.slice(0, 3);
                    return isNaN(a) - isNaN(b) || a > b || -(a < b);
                });
        }
                


        var data;
        data= fetch("movies.json")
            .then(response => response.json())
            .then(veri => {
                // console.log(veri);
                sortTrackingNo(veri);
                // console.log(veri);

                // sortTrackingNo(veri, 'DESC');
                // console.log(veri);


                // console.log("veri liste uzunluğu= " + veri.length);
                
                // console.log("imgUrl verisi=" + veri[0].imgUrl);
                let parent = document.querySelector('#filmler-listele')
                let counter=21;
                let releaseYearDataArray = [];
                for (let i = 0; i < counter; i++) {
                    let releaseYearData = veri[i].releaseYear;
                    console.log("Title: "+ veri[i].Title);
                    
                  

                    if(releaseYearData>=2010){
                        releaseYearDataArray.push(releaseYearData);
                        console.log(releaseYearDataArray);
                        let divElementCol = document.createElement('div')
                        divElementCol.classList.add('col-6', 'col-md-4', 'col-lg-2');

                        let divElementImage = document.createElement('img')
                        divElementImage.setAttribute("src", veri[i].imgUrl);
                        divElementImage.setAttribute("width", "150px");

                        // let parent = document.querySelector('#filmler-listele')//döngü dışına taşındı
                        parent.appendChild(divElementCol)
                        divElementCol.appendChild(divElementImage)
                        
                    }else{
                        counter++;
                        console.log("!!!---This Movie Release Year <=2010");
                    }
                }


                


            })

            // let descBtn = document.querySelector('#desc-btn')
            function theDescFunction(){
                    $("#filmler-listele").html("");
                    data = fetch("movies.json")
            .then(response => response.json())
            .then(veri => {



                // console.log(veri);

               
                

                // sortTrackingNo(veri);
                // console.log(veri);

                sortTrackingNo(veri, 'DESC');
                console.log(veri);


                // console.log("veri liste uzunluğu= " + veri.length);
                // console.log("imgUrl verisi=" + veri[0].imgUrl);
                let parent = document.querySelector('#filmler-listele')
                let counter=21;
                for (let i = 0; i < counter; i++) {
                    let releaseYearData = veri[i].releaseYear;
                    console.log("Title: "+ veri[i].Title);

                    if(releaseYearData>=2010){
                        let divElementCol = document.createElement('div')
                        divElementCol.classList.add('col-6', 'col-md-4', 'col-lg-2');

                        let divElementImage = document.createElement('img')
                        divElementImage.setAttribute("src", veri[i].imgUrl);
                        divElementImage.setAttribute("width", "150px");

                        // let parent = document.querySelector('#filmler-listele')//döngü dışına taşındı
                        parent.appendChild(divElementCol)
                        divElementCol.appendChild(divElementImage)
                        
                    }else{
                        counter++;
                        console.log("!!!---This Movie Release Year <=2010");
                    }
                }


                


            })
                    

                    
                }
            
    </script>
</body>

</html>